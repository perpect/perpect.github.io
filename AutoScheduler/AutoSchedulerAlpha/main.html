<!DOCTYPE html>
<html lang="ko">
<head><meta charset="utf-8">
<title>AutoScheduler</title>
<link rel="stylesheet" href="main.css">
</head>
<body>

<!-- ìƒë‹¨ íƒ­ -->
<div class="tabs">
  <input type="radio" id="topTab1" name="topTab" checked>
  <label for="topTab1">ğŸ—‚ ë³‘ì‚¬ ê·¼ë¬´í‘œ</label>
  <input type="radio" id="topTab2" name="topTab">
  <label for="topTab2">ğŸ’¼ ê°„ë¶€ ê·¼ë¬´í‘œ</label>
  <input type="radio" id="topTab3" name="topTab">
  <label for="topTab3">ğŸ–‹ ë³‘ë ¥ì¼ë³´</label>
</div>

<div id="layout">
  <!-- ì¢Œì¸¡ ë¼ë””ì˜¤ íƒ­ -->
  <div class="side-tabs">
    <input type="radio" id="sideTab1" name="sideTab" checked>
    <label for="sideTab1">ğŸ“‹ ê·¼ë¬´í‘œ ëª©ë¡</label>

    <input type="radio" id="sideTab2" name="sideTab">
    <label for="sideTab2">âœ ìˆ˜ì •í•˜ê¸°</label>

    <input type="radio" id="sideTab3" name="sideTab">
    <label for="sideTab3">âš™ ìë™ ìƒì„±</label>

    <input type="radio" id="sideTab4" name="sideTab">
    <label for="sideTab4">ğŸ”§ ê·¼ë¬´ ì„¤ì •</label>
  </div>

  <!-- ì˜¤ë¥¸ìª½ ë©”ì¸ íŒ¨ë„ -->
  <div id="mainArea">
    <!-- ë‹¬ë ¥ í—¤ë” -->
    <div id="monthBar">
      <button id="prevM">â€¹</button>
      <span id="monthTitle">2025ë…„ 5ì›”</span>
      <button id="calendarIcon">ğŸ“…</button>
      <button id="nextM">â€º</button>
    </div>

    <!-- ë‹¬ë ¥ ê·¸ë¦¬ë“œ -->
    <div id="grid"></div>

    <!-- ì„¸ë¡œ íƒ­ íŒ¨ë„ -->
    <div class="sidePanel panel1">
      <h3>ğŸ“‹ ê·¼ë¬´í‘œ ëª©ë¡</h3><p>TODO: ëª©ë¡ ê¸°ëŠ¥</p>
    </div>
    <div class="sidePanel panel2">
      <h3>âœ ìˆ˜ì •í•˜ê¸°</h3><p>TODO: ì…€ í¸ì§‘ ë“±</p>
    </div>
    <div class="sidePanel panel3">
      <h3>âš™ ìë™ ìƒì„±</h3>
      <button onclick="alert('SPIL í˜¸ì¶œ')">Generate</button>
    </div>
    <div class="sidePanel panel4">
      <h3>ğŸ”§ ê·¼ë¬´ ì„¤ì •</h3><p>TODO: ê·¼ë¬´ ìœ í˜• í¸ì§‘</p>
    </div>
  </div>
</div>

<!-- ë“œë¡­ë‹¤ìš´ -->
<div id="ymDropdown">
  <select id="yearSel"></select>
  <select id="monthSel">
    <option>1ì›”</option><option>2ì›”</option><option>3ì›”</option><option>4ì›”</option>
    <option>5ì›”</option><option>6ì›”</option><option>7ì›”</option><option>8ì›”</option>
    <option>9ì›”</option><option>10ì›”</option><option>11ì›”</option><option>12ì›”</option>
  </select>
  <button onclick="applyYM()">ì´ë™</button>
</div>
<script src="./ScheduleTable/Calandar.js"></script>
<script src="./ScheduleTable/Event.js"></script>
<script src="./ScheduleTable/Person.js"></script>
<script src="./ScheduleTable/ScheduleType.js"></script>
<script src="./ScheduleTable.js"></script>
<script type="module">
import { Person, PersonManager } from './ScheduleTable/Person.js';
const grid = document.getElementById('grid');
const monthTitle = document.getElementById('monthTitle');
const dropdown = document.getElementById('ymDropdown');
const now = new Date();
let year = now.getFullYear(), month = now.getMonth();
const people = new PersonManager();
people.add(new Person('A', new Date(2001, 1, 1), new Date(2024, 8, 20), "01012341234", "00-70000001", 859, "ìƒë³‘"));
people.add(new Person('B', new Date(2011, 11, 11), new Date(2024, 9, 25), "11012341234", "01-70000001", 861, "ìƒë³‘"));
people.add(new Person('C', new Date(2021, 3, 26), new Date(2024, 10, 30), "21012341234", "02-70000001", 862, "ì¼ë³‘"));
people.add(new Person('D', new Date(2004, 6, 15), new Date(2024, 12, 5), "31012341234", "03-70000001", 867, "ì´ë³‘"));

function buildGrid(){
  grid.innerHTML = '';
  const days = new Date(year, month+1, 0).getDate();
  grid.style.gridTemplateColumns = `120px repeat(${days}, 28px)`;
  grid.appendChild(cell('hd',''));
  for(let d=1; d<=days; d++) grid.appendChild(cell('hd', d));
  people.forEach(name=>{
    grid.appendChild(cell('hd',name));
    for(let d=1; d<=days; d++) {
      const c = cell('cell','');
      c.onclick = ()=> toggle(c);
      grid.appendChild(c);
    }
  });
  monthTitle.textContent = `${year}ë…„ ${month+1}ì›”`;
}
function cell(cls, txt){
  const div = document.createElement('div');
  div.className = cls;
  div.textContent = txt;
  return div;
}
function toggle(el){
  if(el.classList.contains('blue')) el.className = 'cell red';
  else if(el.classList.contains('red')) el.className = 'cell';
  else el.className = 'cell blue';
}

document.getElementById('prevM').onclick = ()=>{
  month--; if(month<0){month=11;year--;} buildGrid();
};
document.getElementById('nextM').onclick = ()=>{
  month++; if(month>11){month=0;year++;} buildGrid();
};
document.getElementById('calendarIcon').onclick = (e)=>{
  const rect = e.target.getBoundingClientRect();
  dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
  dropdown.style.top = (rect.bottom + window.scrollY + 4) + 'px';
  dropdown.style.left = (rect.left + window.scrollX - 60) + 'px';
  document.getElementById('yearSel').value = year;
  document.getElementById('monthSel').selectedIndex = month;
};
function applyYM(){
  year = parseInt(document.getElementById('yearSel').value);
  month = document.getElementById('monthSel').selectedIndex;
  buildGrid();
  dropdown.style.display = 'none';
}
const yearSel = document.getElementById('yearSel');
for(let y=2020; y<=2030; y++){
  const opt = document.createElement('option');
  opt.value = y; opt.textContent = y + 'ë…„';
  if(y === year) opt.selected = true;
  yearSel.appendChild(opt);
}
buildGrid();
</script>
</body>
</html>
